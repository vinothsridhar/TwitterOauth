package twitteroauthview.sample;


import android.app.Dialog;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;
import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;


public class ViewMap extends FragmentActivity
{

    private GoogleMap mMap;
    double latitude, longitude;
    LinearLayout map_btn_layout;
    Button home, yourlocation, path, shoplocation;
    boolean btn_enabled = false;
    boolean shopLocationEnabled = false;
    boolean yourlocationenabled = true;
    Marker sourceMarker, destMarker;
    TextView pathinstr;
    boolean isGpsEnabled, isNetworkEnabled;
    LocationManager locationManager;
    Location gpslocation;
    double userlat, userlng;


    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_viewmap);


        int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());
        if (status != ConnectionResult.SUCCESS)
        {
            int requestCode = 10;
            Dialog dialog = GooglePlayServicesUtil.getErrorDialog(status, this, requestCode);
            dialog.show();
        }
        else
        {
            map_btn_layout.setVisibility(View.VISIBLE);
            FragmentManager fm = this.getSupportFragmentManager();
            SupportMapFragment f = (SupportMapFragment)fm.findFragmentById(R.id.map);
            mMap = f.getMap();
        }
    }


    @Override
    protected void onResume()
    {
        // TODO Auto-generated method stub
        super.onResume();
    }


    public void setLocation()
    {
        try
        {
            if (sourceMarker == null)
                sourceMarker = mMap.addMarker(new MarkerOptions().position(new LatLng(userlat, userlng)));
            else
                sourceMarker.setPosition(new LatLng(userlat, userlng));
            mMap.animateCamera(CameraUpdateFactory.newLatLng(new LatLng(userlat, userlng)));
        }
        catch (Exception e)
        {
            System.out.println(e.toString());
        }
    }

}
